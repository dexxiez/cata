import{b0 as t,S as e,a4 as a,a5 as s,a7 as o,G as n,aX as l,aY as i,b1 as r,b2 as c,aj as p,ac as d,ad as m,ae as u,af as g,ag as h,am as I,b as f,ah as v,a6 as S,R as b,a as T,aI as P,b3 as C,b4 as O,aJ as k,a$ as L,aB as y,ak as R,al as w,T as B,aC as G,aE as M,aD as A,aL as D,aM as E,F,q as H,s as K,b5 as N}from"./detailed_results-BcgtFdXH.chunk.js";import{$ as W,l as x,a0 as V,n as j,o as $,K as q,q as J,v as U,Y as _,T as Y,F as X,G as z}from"./preset_utils-Dz2KMMFX.chunk.js";import{R as Q}from"./suggest_reforges_action-DVUR84On.chunk.js";import{s as Z}from"./shared-CvrPJ2bV.chunk.js";const tt={inputs:[W({fieldName:"combustThreshold",label:"Combust Threshold - Bloodlust",labelTooltip:"The value at which Combustion should be cast during Bloodlust",changeEmitter:t=>t.rotationChangeEmitter,getValue:t=>t.getSimpleRotation().combustThreshold,positive:!0}),W({fieldName:"combustLastMomentLustPercentage",label:"Combust Threshold - Last moment during Bloodlust",labelTooltip:"The value at which Combustion should be cast when Bloodlust (+ Berserking) is about to run out.",changeEmitter:t=>t.rotationChangeEmitter,getValue:t=>t.getSimpleRotation().combustLastMomentLustPercentage,positive:!0}),W({fieldName:"combustNoLustPercentage",label:"Combust Threshold - Outside of Bloodlust",labelTooltip:"The value at which Combustion should be cast when Bloodlust is not up.",changeEmitter:t=>t.rotationChangeEmitter,getValue:t=>t.getSimpleRotation().combustNoLustPercentage,positive:!0})]},et={type:"TypeAPL",prepullActions:[{action:{castSpell:{spellId:{spellId:30482}}},doAtValue:{const:{val:"-5.5s"}}},{action:{castSpell:{spellId:{spellId:55342}}},doAtValue:{const:{val:"-4s"}}},{action:{castSpell:{spellId:{otherId:"OtherActionPotion"}}},doAtValue:{const:{val:"-2.5s"}}},{action:{castSpell:{spellId:{spellId:11366}}},doAtValue:{const:{val:"-2.5s"}}}],priorityList:[{action:{autocastOtherCooldowns:{}}},{action:{condition:{cmp:{op:"OpGt",lhs:{currentTime:{}},rhs:{const:{val:"7s"}}}},castSpell:{spellId:{spellId:26297}}}},{action:{condition:{cmp:{op:"OpGt",lhs:{currentTime:{}},rhs:{const:{val:"7s"}}}},castSpell:{spellId:{spellId:82174}}}},{action:{condition:{or:{vals:[{spellIsReady:{spellId:{spellId:11129}}}]}},castSpell:{spellId:{itemId:58091}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{const:{val:"10s"}}}},{cmp:{op:"OpGt",lhs:{currentManaPercent:{}},rhs:{const:{val:"25%"}}}}]}},castSpell:{spellId:{spellId:30482}}}},{action:{condition:{and:{vals:[{or:{vals:[{and:{vals:[{auraIsKnown:{auraId:{spellId:26297}}},{auraIsActive:{auraId:{spellId:26297}}},{cmp:{op:"OpLe",lhs:{currentTime:{}},rhs:{const:{val:"17s"}}}}]}},{and:{vals:[{not:{val:{auraIsKnown:{auraId:{spellId:26297}}}}},{cmp:{op:"OpGt",lhs:{auraRemainingTime:{auraId:{spellId:2825,tag:-1}}},rhs:{const:{val:"2s"}}}}]}}]}},{cmp:{op:"OpGt",lhs:{mageCurrentCombustionDotEstimate:{}},rhs:{const:{val:"515000"}}}}]}},castSpell:{spellId:{spellId:11129}}}},{action:{condition:{and:{vals:[{or:{vals:[{and:{vals:[{auraIsKnown:{auraId:{spellId:26297}}},{auraIsActive:{auraId:{spellId:26297}}},{cmp:{op:"OpLt",lhs:{auraRemainingTime:{auraId:{spellId:26297}}},rhs:{const:{val:"2.5s"}}}},{cmp:{op:"OpLe",lhs:{currentTime:{}},rhs:{const:{val:"17s"}}}}]}},{and:{vals:[{not:{val:{auraIsKnown:{auraId:{spellId:26297}}}}},{auraIsActive:{auraId:{spellId:2825,tag:-1}}},{cmp:{op:"OpLe",lhs:{auraRemainingTime:{auraId:{spellId:2825,tag:-1}}},rhs:{const:{val:"2s"}}}}]}}]}},{cmp:{op:"OpGt",lhs:{mageCurrentCombustionDotEstimate:{}},rhs:{const:{val:"260000"}}}}]}},castSpell:{spellId:{spellId:11129}}}},{action:{condition:{and:{vals:[{or:{vals:[{and:{vals:[{auraIsKnown:{auraId:{spellId:26297}}},{cmp:{op:"OpGt",lhs:{currentTime:{}},rhs:{const:{val:"17s"}}}}]}},{and:{vals:[{not:{val:{auraIsKnown:{auraId:{spellId:26297}}}}},{not:{val:{auraIsActive:{auraId:{spellId:2825,tag:-1}}}}}]}}]}},{cmp:{op:"OpGt",lhs:{mageCurrentCombustionDotEstimate:{}},rhs:{const:{val:"190000"}}}}]}},castSpell:{spellId:{spellId:11129}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpLt",lhs:{remainingTime:{}},rhs:{const:{val:"15s"}}}},{cmp:{op:"OpGt",lhs:{mageCurrentCombustionDotEstimate:{}},rhs:{const:{val:"190000"}}}}]}},castSpell:{spellId:{spellId:11129}}}},{action:{condition:{and:{vals:[{auraIsActiveWithReactionTime:{auraId:{spellId:48108}}},{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{spellTravelTime:{spellId:{spellId:11366}}}}}]}},castSpell:{spellId:{spellId:11366}}}},{action:{condition:{and:{vals:[{auraIsInactiveWithReactionTime:{sourceUnit:{type:"CurrentTarget"},auraId:{spellId:44457}}},{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{const:{val:"5s"}}}}]}},castSpell:{spellId:{spellId:44457}}}},{action:{condition:{not:{val:{spellIsReady:{spellId:{spellId:11129}}}}},castSpell:{spellId:{spellId:82731}}}},{hide:!0,action:{condition:{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{const:{val:"30s"}}}},castSpell:{spellId:{spellId:55342}}}},{hide:!0,action:{condition:{cmp:{op:"OpLt",lhs:{currentManaPercent:{}},rhs:{const:{val:"40%"}}}},channelSpell:{spellId:{spellId:12051},interruptIf:{and:{vals:[{cmp:{op:"OpGt",lhs:{currentManaPercent:{}},rhs:{const:{val:"20%"}}}},{cmp:{op:"OpLt",lhs:{remainingTime:{}},rhs:{const:{val:"20s"}}}}]}}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpGt",lhs:{currentTime:{}},rhs:{const:{val:"25s"}}}},{cmp:{op:"OpLt",lhs:{currentManaPercent:{}},rhs:{const:{val:"90%"}}}}]}},castSpell:{spellId:{itemId:36799}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpGe",lhs:{remainingTime:{}},rhs:{const:{val:"20s"}}}},{cmp:{op:"OpLt",lhs:{currentManaPercent:{}},rhs:{const:{val:"10%"}}}}]}},castSpell:{spellId:{spellId:6117}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{const:{val:"5.15s"}}}},{cmp:{op:"OpLe",lhs:{math:{op:"OpAdd",lhs:{dotRemainingTime:{spellId:{spellId:44457}}},rhs:{inputDelay:{}}}},rhs:{const:{val:"0.15s"}}}},{dotIsActive:{spellId:{spellId:44457}}}]}},wait:{duration:{math:{op:"OpAdd",lhs:{dotRemainingTime:{spellId:{spellId:44457}}},rhs:{inputDelay:{}}}}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpGt",lhs:{currentManaPercent:{}},rhs:{const:{val:"10%"}}}},{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{math:{op:"OpAdd",lhs:{spellCastTime:{spellId:{spellId:133}}},rhs:{spellTravelTime:{spellId:{spellId:133}}}}}}}]}},castSpell:{spellId:{spellId:133}}}},{action:{condition:{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{spellCastTime:{spellId:{spellId:2948}}}}},castSpell:{spellId:{spellId:2948}}}},{action:{castSpell:{spellId:{spellId:2136}}}}]},at={items:[{id:59449,enchant:4207,gems:[68780,59478,59493]},{id:62416,reforging:165},{id:56399,enchant:4200,gems:[52217],reforging:144},{id:62357,enchant:4115},{id:62441,enchant:4102,gems:[52239,52217]},{id:56389,enchant:4257,gems:[0],reforging:145},{id:62364,enchant:4068,gems:[52217,0],reforging:165},{id:54503,gems:[52207,52207],reforging:167},{id:54505,enchant:4112,gems:[52207],reforging:144},{id:62450,enchant:4104,gems:[52239]},{id:64904,reforging:166},{id:56432},{id:62047,reforging:165},{id:62465,reforging:137},{id:64489,enchant:4097,reforging:144},{},{id:56296,reforging:166}]},st={items:[{id:71508,enchant:4207,gems:[68780,52207],reforging:165},{id:71472,gems:[52207],reforging:165},{id:71511,enchant:4200,gems:[52205],reforging:144},{id:71434,enchant:4115,reforging:165},{id:71510,enchant:4102,gems:[52239,52217]},{id:71471,enchant:4257,gems:[0],reforging:144},{id:71614,enchant:4068,gems:[52207,0],reforging:144},{id:71613,gems:[52207,52207],reforging:165},{id:71509,enchant:4112,gems:[52207,52207],reforging:165},{id:71447,enchant:4104,gems:[52207],reforging:151},{id:71217,gems:[52207]},{id:71449,reforging:165},{id:69110},{id:62047,reforging:165},{id:71086,enchant:4097,gems:[52207,52207,52207],reforging:152},{},{id:71575,reforging:137}]},ot=x("P1 Preset",{items:[{id:60237,enchant:4207,gems:[68780,52217],reforging:151},{id:69882,randomSuffix:-129,reforging:145},{id:65213,enchant:4200,gems:[52207],reforging:152},{id:60232,enchant:4115,gems:[52239],reforging:165},{id:65212,enchant:4102,gems:[52207,52217],reforging:144},{id:65138,enchant:4108,gems:[0],reforging:165},{id:65209,enchant:4107,gems:[52208,0],reforging:165},{id:65034,gems:[52207,52207],reforging:144},{id:65211,enchant:4112,gems:[52239,52207]},{id:65069,enchant:4104,gems:[52207],reforging:165},{id:65373,randomSuffix:-129,reforging:145},{id:65123,reforging:165},{id:65105},{id:62047,reforging:165},{id:68132,randomSuffix:-129,enchant:4097,reforging:145},{id:65133,enchant:4091},{id:59460,reforging:167}]},{talentTree:1}),nt=x("P1 Pre-raid",at,{talentTree:1}),lt=x("P3 Preset",st,{talentTree:1}),it=t.create({combustThreshold:4e5,combustLastMomentLustPercentage:19e4,combustNoLustPercentage:23e4}),rt=t.create({combustThreshold:515e3,combustLastMomentLustPercentage:19e4,combustNoLustPercentage:26e4}),ct=t.create({combustThreshold:37e4,combustLastMomentLustPercentage:21e4,combustNoLustPercentage:25e4}),pt=V("P1 - Default",e.SpecFireMage,it),dt=V("P3 - Default",e.SpecFireMage,rt),mt=V("P3 - Not Troll",e.SpecFireMage,ct),ut=j("APL",et,{talentTree:1}),gt=$("Default",a.fromMap({[s.StatIntellect]:1.33,[s.StatSpellPower]:1,[s.StatHitRating]:1.09,[s.StatCritRating]:.62,[s.StatHasteRating]:.82,[s.StatMasteryRating]:.46})),ht={name:"Fire",data:o.create({talentsString:"003-230330221120121213231-03",glyphs:n.create({prime1:l.GlyphOfFireball,prime2:l.GlyphOfPyroblast,prime3:l.GlyphOfMoltenArmor,major1:i.GlyphOfEvocation,major2:i.GlyphOfDragonSBreath,major3:i.GlyphOfInvisibility,minor1:r.GlyphOfMirrorImage,minor2:r.GlyphOfArmors,minor3:r.GlyphOfTheMonkey})})},It=c.create({classOptions:{}}),ft=p.create({arcaneBrilliance:!0,bloodlust:!0,markOfTheWild:!0,icyTalons:!0,moonkinForm:!0,leaderOfThePack:!0,powerWordFortitude:!0,strengthOfEarthTotem:!0,trueshotAura:!0,wrathOfAirTotem:!0,demonicPact:!0,blessingOfKings:!0,blessingOfMight:!0,communion:!0}),vt=d.create({flask:m.FlaskOfTheDraconicMind,food:u.FoodSeafoodFeast,defaultPotion:g.VolcanicPotion,prepopPotion:g.VolcanicPotion,tinkerHands:h.TinkerHandsSynapseSprings}),St=I.create({ebonPlaguebringer:!0,shadowAndFlame:!0}),bt={distanceFromTarget:20,profession1:f.Engineering,profession2:f.Tailoring},Tt=[{unitStat:v.fromPseudoStat(S.PseudoStatSpellHastePercent),presets:new Map([["11-tick - Combust",4.98689],["5-tick - LvB/Pyro",12.50704],["12-tick - Combust",15.00864],["BL - 15-tick - Combust",20.86054],["13-tick - Combust",25.07819],["BL - 16-tick - Combust",29.09891],["14-tick - Combust",35.04391],["BL - 17-tick - Combust",37.40041],["6-tick - LvB/Pyro",37.52006],["15-tick - Combust",45.03265],["16-tick - Combust",54.91869],["7-tick - LvB/Pyro",62.46955],["17-tick - Combust",64.88049],["18-tick - Combust",74.97816],["19-tick - Combust",85.01391],["8-tick - LvB/Pyro",87.44144],["20-tick - Combust",95.12199],["21-tick - Combust",105.12825]])}],Pt=q("P1 - Default",{race:b.RaceTroll,gear:ot,rotation:pt}),Ct=q("P3 - Default (Troll)",{race:b.RaceTroll,gear:lt,rotation:dt}),Ot=q("P3 - Default (Worgen)",{race:b.RaceWorgen,gear:lt,rotation:mt}),kt=Tt.find((t=>t.unitStat.equalsPseudoStat(S.PseudoStatSpellHastePercent))).presets,Lt=J(e.SpecFireMage,{cssClass:"fire-mage-sim-ui",cssScheme:T.getCssClass(T.Mage),knownIssues:[],epStats:[s.StatIntellect,s.StatSpellPower,s.StatHitRating,s.StatCritRating,s.StatHasteRating,s.StatMasteryRating],epReferenceStat:s.StatSpellPower,displayStats:v.createDisplayStatArray([s.StatHealth,s.StatMana,s.StatStamina,s.StatIntellect,s.StatSpellPower,s.StatMasteryRating],[S.PseudoStatSpellHitPercent,S.PseudoStatSpellCritPercent,S.PseudoStatSpellHastePercent]),modifyDisplayStats:t=>Z(t),defaults:{gear:ot.gear,epWeights:gt.epWeights,statCaps:(new a).withPseudoStat(S.PseudoStatSpellHitPercent,17),softCapBreakpoints:[P.fromStat(s.StatMasteryRating,{breakpoints:[23/C.get(e.SpecFireMage)*O],capType:k.TypeThreshold,postCapEPs:[0]}),P.fromPseudoStat(S.PseudoStatSpellHastePercent,{breakpoints:[kt.get("5-tick - LvB/Pyro"),kt.get("12-tick - Combust"),kt.get("13-tick - Combust"),kt.get("14-tick - Combust"),kt.get("6-tick - LvB/Pyro"),kt.get("15-tick - Combust"),kt.get("16-tick - Combust"),kt.get("7-tick - LvB/Pyro"),kt.get("17-tick - Combust"),kt.get("18-tick - Combust"),kt.get("19-tick - Combust"),kt.get("8-tick - LvB/Pyro"),kt.get("20-tick - Combust"),kt.get("21-tick - Combust")],capType:k.TypeThreshold,postCapEPs:[.61*L]})],consumes:vt,rotationType:y.TypeSimple,simpleRotation:it,talents:ht.data,specOptions:It,other:bt,raidBuffs:ft,partyBuffs:R.create({manaTideTotems:1}),individualBuffs:w.create({innervateCount:0,vampiricTouch:!0}),debuffs:St},playerIconInputs:[],rotationInputs:tt,includeBuffDebuffInputs:[],excludeBuffDebuffInputs:[],otherInputs:{inputs:[U,_,Y,X]},encounterPicker:{showExecuteProportion:!0},presets:{epWeights:[gt],rotations:[pt,dt,mt,ut],talents:[ht],gear:[ot,nt,lt],builds:[Pt,Ct,Ot]},autoRotation:()=>ut.rotation.rotation,simpleRotation:(t,e)=>{if(0!==e.igniteCombustThreshold||0!==e.igniteLastMomentLustPercentage||0!==e.igniteNoLustPercentage){const e=t.getRace()===b.RaceTroll?rt:ct;t.setSimpleRotation(B.nextEventID(),e)}const a=ut.rotation.rotation,{combustThreshold:s,combustLastMomentLustPercentage:o,combustNoLustPercentage:n}=e,l=G.fromJsonString(`{"condition":{"and":{"vals":[{"or":{"vals":[{"and":{"vals":[{"auraIsKnown":{"auraId":{"spellId":26297}}},{"auraIsActive":{"auraId":{"spellId":26297}}},{"cmp":{"op":"OpLe","lhs":{"currentTime":{}},"rhs":{"const":{"val":"17s"}}}}]}},{"and":{"vals":[{"not":{"val":{"auraIsKnown":{"auraId":{"spellId":26297}}}}},{"cmp":{"op":"OpGt","lhs":{"auraRemainingTime":{"auraId":{"spellId":2825,"tag":-1}}},"rhs":{"const":{"val":"2s"}}}}]}}]}},{"cmp":{"op":"OpGt","lhs":{"mageCurrentCombustionDotEstimate":{}},"rhs":{"const":{"val":"${s}"}}}}]}},"castSpell":{"spellId":{"spellId":11129}}}`),i=G.fromJsonString(`{"condition":{"and":{"vals":[{"or":{"vals":[{"and":{"vals":[{"auraIsKnown":{"auraId":{"spellId":26297}}},{"auraIsActive":{"auraId":{"spellId":26297}}},{"cmp":{"op":"OpLt","lhs":{"auraRemainingTime":{"auraId":{"spellId":26297}}},"rhs":{"const":{"val":"2.5s"}}}},{"cmp":{"op":"OpLe","lhs":{"currentTime":{}},"rhs":{"const":{"val":"17s"}}}}]}},{"and":{"vals":[{"not":{"val":{"auraIsKnown":{"auraId":{"spellId":26297}}}}},{"auraIsActive":{"auraId":{"spellId":2825,"tag":-1}}},{"cmp":{"op":"OpLe","lhs":{"auraRemainingTime":{"auraId":{"spellId":2825,"tag":-1}}},"rhs":{"const":{"val":"2s"}}}}]}}]}},{"cmp":{"op":"OpGt","lhs":{"mageCurrentCombustionDotEstimate":{}},"rhs":{"const":{"val":"${o}"}}}}]}},"castSpell":{"spellId":{"spellId":11129}}}`),r=G.fromJsonString(`{"condition":{"and":{"vals":[{"or":{"vals":[{"and":{"vals":[{"auraIsKnown":{"auraId":{"spellId":26297}}},{"cmp":{"op":"OpGt","lhs":{"currentTime":{}},"rhs":{"const":{"val":"17s"}}}}]}},{"and":{"vals":[{"not":{"val":{"auraIsKnown":{"auraId":{"spellId":26297}}}}},{"not":{"val":{"auraIsActive":{"auraId":{"spellId":2825,"tag":-1}}}}}]}}]}},{"cmp":{"op":"OpGt","lhs":{"mageCurrentCombustionDotEstimate":{}},"rhs":{"const":{"val":"${n}"}}}}]}},"castSpell":{"spellId":{"spellId":11129}}}`),c=G.fromJsonString(`{"condition":{"and":{"vals":[{"cmp":{"op":"OpLt","lhs":{"remainingTime":{}},"rhs":{"const":{"val":"15s"}}}},{"cmp":{"op":"OpGt","lhs":{"mageCurrentCombustionDotEstimate":{}},"rhs":{"const":{"val":"${o}"}}}}]}},"castSpell":{"spellId":{"spellId":11129}}}`),p=a;return p.priorityList[5]=M.create({action:l}),p.priorityList[6]=M.create({action:i}),p.priorityList[7]=M.create({action:r}),p.priorityList[8]=M.create({action:c}),A.create({simple:D.create({cooldowns:E.create()}),prepullActions:p.prepullActions,priorityList:p.priorityList})},hiddenMCDs:[26297,2825,12051,82731,36799,55342,82174,58091],raidSimPresets:[{spec:e.SpecFireMage,talents:ht.data,specOptions:It,consumes:vt,otherDefaults:bt,defaultFactionRaces:{[F.Unknown]:b.RaceUnknown,[F.Alliance]:b.RaceWorgen,[F.Horde]:b.RaceTroll},defaultGear:{[F.Unknown]:{},[F.Alliance]:{1:ot.gear,2:nt.gear},[F.Horde]:{1:ot.gear,2:nt.gear}}}]});class yt extends z{constructor(t,e){super(t,e,Lt),e.sim.waitForInit().then((()=>{new Q(this,{statSelectionPresets:Tt,updateSoftCaps:t=>{const a=e.getRaid()?.getBuffs(),s=!!(a?.bloodlust||a?.timeWarp||a?.heroism),o=!!e.getBuffs().powerInfusionCount,n=e.getRace()===b.RaceTroll,l=(t,e)=>Number(N(100*((t/100+1)/e-1),{maximumFractionDigits:5}));return this.individualConfig.defaults.softCapBreakpoints.forEach((e=>{const a=t.find((t=>t.unitStat.equals(e.unitStat)));if(e.unitStat.equalsPseudoStat(S.PseudoStatSpellHastePercent)&&a){const t=new Set([...e.breakpoints]),i=e=>[...t.values()].find((t=>t.toFixed(2)===e.toFixed(2))),r=[kt.get("5-tick - LvB/Pyro"),kt.get("6-tick - LvB/Pyro"),kt.get("7-tick - LvB/Pyro"),kt.get("8-tick - LvB/Pyro")];e.breakpoints.forEach((e=>{const a=r.includes(e);if(s){const a=l(e,1.3);if(a>0&&(i(a)||t.add(a),n)){const e=l(a,1.2);e>0&&!i(a)&&t.add(e)}}if(o&&!a){const a=l(e,1.2);if(a>0&&(i(a)||t.add(a),n)){const e=l(a,1.2);e>0&&!i(a)&&t.add(e)}}})),a.breakpoints=[...t].sort(((t,e)=>t-e))}})),t},additionalSoftCapTooltipInformation:{[s.StatHasteRating]:()=>{const t=e.getRaid()?.getBuffs(),a=!!(t?.bloodlust||t?.timeWarp||t?.heroism),s=!!e.getBuffs().powerInfusionCount,o=e.getRace()===b.RaceTroll;return H(K,null,(a||s||o)&&H(K,null,H("p",{className:"mb-0"},"Additional breakpoints have been created using the following cooldowns:"),H("ul",{className:"mb-0"},a&&H("li",null,"Bloodlust"),s&&H("li",null,"Power Infusion"),o&&H("li",null,"Berserking"))))}}})}))}}export{yt as F};
